# 웹 페이지 렌더링 방식

모던 웹에서는 웹서비스를 제공할 때 크게 3가지 방법으로 나누어 제공한다.



## 서버 사이드 렌더링(SSR)

**서버 사이드 렌더링(SSR)** 은 사용자의 요청에 따라 웹 페이지를 동적으로 구성하여 응답하는 방식이다. 웹 초창기부터 쓰이던 방법이다.

대표적인 예시로 `php`, `jsp`, `asp` 가 있다.

SSR은 제공하는 페이지가 **동적**인 경우에 유용하다.



### 장점

SSR 방식을 쓰면 유의미한 콘텐츠가 완성된 상태로 브라우저에 정보가 도착하므로, 체감 대기시간이 짧다. 또한 클라이언트 입장에서는 무거운 스크립트를 실행할 필요가 없어서 가볍다.

SSR의 또다른 장점은 SEO(검색엔진최적화)가 용이하다는 점이다. 웹 크롤러가 js 스크립트를 실행하지 않아도, 페이지에 대략적인 정보가 담겨있기 때문이다.



### 단점

SSR의 결정적인 단점은 서버에 부하가 걸린다는 점이다.

또, SSR은 융통성이 없다. 예를 들어 로그인 한 유저의 ID를 보여주는 웹 페이지를 생각해보자. 사용자별로 달라지는 부분은 고작 ID를 띄우는 DOM 정도일텐데, 이 차이를 위해서 전체 페이지를 매번 렌더링하는 것은 비효율적이다.



## 클라이언트 사이드 렌더링(CSR)

**클라이언트 사이드 렌더링(CSR)** 은 일단 골격 웹페이지를 다운 받은 뒤, AJAX를 이용하여 나머지 내용을 받아서 클라이언트 브라우저에서 채우는 방식이다.

대표적인 예시로 `react`, `vue` 같은 SPA 프레임워크들이 있다.

다음의 내가 만든 사이트들은 CSR 방식을 사용하고 있다.

- https://krissvector.moe/
- https://gfcombinator.netlify.app/
- http://zzalshow.krissvector.moe:4577/



### 장점

CSR의 장점은 반응성이 좋다는 점이다. 최초 로딩시간만 견디면, 그 이후로는 웹 페이지를 탐색할 때 **끊김없는(seamless)** 경험을 할 수 있다. 또한 서버에 웹 페이지 전체를 요구하는 HTTP 요청을 줄일 수 있어, 서버 부하 경감에도 도움이 된다.



### 단점

CSR의 단점은 **SEO가 안된다**는 점이다. 때문에 인간 사용자에게는 CSR 방식의 웹페이지를 제공하더라도, SSR 또는 사전 렌더링 방식을 겸하는 서비스들도 있다.

또한 CSR은 클라이언트의 성능이 좋지 못할 때 매우 치명적일 수 있다. 모든 환경이 1MB를 넘어가는 자바스크립트를 쌩쌩 돌릴 수 있는 쾌적한 곳은 아니다. 세상에는 이걸 쓰라고 만들어놨나 싶은 브라우저(ex: 엑스박스 탑재 브라우저)도 존재한다. 이런 열악한 환경에서 긴급한 상황으로 인해 접속할 가능성이 있는 서비스들은 CSR를 지양해야 한다.



## 사전 렌더링(Pre-Rendering)

사전 렌더링 방식은 제공할 가능성이 있는 페이지를 싸그리 HTML로 렌더링 한 뒤, 사용자의 요청에 따라 정적으로 제공하는 방식이다. CSR을 완전히 배제하는 것은 아니지만, CSR처럼 모든 콘텐츠를 브라우저에 맡기지는 않는다.

사전 렌더링 방식은 제공하고자 하는 페이지가 **정적**인 경우에 유용하게 쓸 수 있다. 이 블로그도 사전 렌더링 방식을 채택하고 있다.

사전 렌더링은 `react`나 `vue`로 작성한 프로젝트에 `react-snap` 같은 플러그인을 써서 실현할 수도 있으며, `ejs`, `pug` 같은 SSR 스크립트를 기반으로 실현할 수도 있다.



### 장점

SSR과 다르게 한 번 렌더링한 페이지를 계속 울궈먹을 수 있으므로 서버 부하 경감에 도움이 된다. 그러면서 동시에 사용자는 짧은 초기 로딩 속도를 체감할 수 있다.

또한 SEO가 용이하다. 핵심적인 정보는 사전 렌더링 할 때 HTML 파일에 포함시키고, 부수적인 정보나 UX 및 인터랙션에 관련된 것만 js로 심어서 보내기 때문이다.



### 단점

요청이 다양해지면 써먹을 수가 없다. 예를 들어 검색 결과 페이지를 생각해보자. 존재할 수 있는 검색 결과 페이지의 가능성은 거의 무한하다. 그런 경우의 수를 전부 고려해서 사전 렌더링을 한다는 것은 불가능하다.

